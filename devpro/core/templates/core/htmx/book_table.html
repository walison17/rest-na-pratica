{% load core_tags %}
<div id="books-datatable" class="col-12">
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <th class="d-flex justify-content-between align-items-center">
        <span>Nome</span>
        <a href="#" hx-get="{% order_query_string 'name' %}" hx-target="#books-datatable" hx-push-url="true">
          {% order_icon 'name' %}
        </a>
      </th>
      <th>
        <span>Ano de publicação</span>
        <a href="#" hx-get="{% order_query_string 'publication_year' %}" hx-target="#books-datatable" hx-push-url="true">
          {% order_icon 'publication_year' %}
        </a>
      </th>
      <th>Edição</th>
      <th>Autores</th>
    </thead>
    <tbody>
      {% for book in object_list %}
      <tr>
        <td>{{ book.name }}</td>
        <td>{{ book.publication_year }}</td>
        <td>{{ book.edition }}</td>
        <td>{{ book.authors.all|join:", " }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <nav>
    <ul class="pagination justify-content-end">
      {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="{% query_string page=page_obj.previous_page_number %}" hx-push-url="true" hx-target="#books-datatable" hx-get="{% url 'htmx_books' %}{% query_string page=page_obj.previous_page_number %}">Anterior</a>
      </li>
      {% endif %}
      {% for page in page_obj.paginator.page_range %}
      <li class="page-item">
        <a class="page-link" href="{% query_string page=page %}" hx-get="{% query_string page=page %}" hx-push-url="true" hx-target="#books-datatable">{{ page }}</a>
      </li>
      {% endfor %}
      {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="{% query_string page=page_obj.next_page_number %}" hx-push-url="true" hx-get="{% query_string page=page_obj.next_page_number %}" hx-target="#books-datatable">Próxima</a>
      </li>
      {% endif %}
    </ul>
  </nav>
</div>